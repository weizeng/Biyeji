<ion-view title="毕业墙">
    <ion-nav-buttons side="right">
        <button class="button button-clear icon ion-ios-compose-outline" ui-sref="addXy()">
        </button>
    </ion-nav-buttons>

    <ion-content>
        <ion-refresher on-refresh="hardRefresh()"></ion-refresher>
        <ion-list>
            <ion-item class="xy-item" ng-repeat="item in results|filter:''">
                <div class="item item-avatar" ng-click="goXyDetail(item)">
                    <img ng-show="item.get('userId').get('cover_image_phone')"
                         src="{{item.get('userId').get('cover_image_phone')}}" onerror="javascript:this.src='img/ionic.png'">
                    <!--<h2>{{item.get('userId').get('nick')}}</h2>-->

                    <div class="item-title-row">
                        <div class="item-title">{{item.get('userId').get('nick')}}</div>
                        <div class="item-after">{{item.createdAt|filter:dateFn(item.createdAt)}}</div>
                    </div>

                    <p>{{item.get('userId').get('description')}}</p>

                </div>

                <div class="item item-body">
                    <img class="full-image" ng-show="item.get('image')._url" ng-click="goXyDetail(item)"
                         onerror="javascript:this.src='img/weibo.jpg'" src="{{item.get('image')._url}}">
                    <div style="padding-left: 16px;">
                        <!--<p>{{item.get('title')}}</p>-->
                        <!--<p>{{item.createdAt}}</p>-->
                        <a class="button button-icon icon ion-ios-heart-outline" ng-click="goZan(item)"> 1</a>
                        <!--<a class="button button-icon icon ion-ios-heart">1</a>-->
                        <a class="button button-icon icon ion-ios-chatbubble-outline" ng-click="goXyDetail(item)"> 1</a>
                        <!--<a  class="button button-icon icon">{{item.createdAt|filter:dateFn(item.createdAt)}}</a>-->
                        <!--<a class="subdued" ng-click="goZan(item)">1</a>-->
                        <!--<a href="#" class="subdued">5 Comments</a>-->
                        <!--</p>-->
                        <!--<div ng-bind-html="item.htmlStr"></div>-->
                        <!--<p>{{item.createdAt}}</p>-->
                        <form ng-submit="saveForm()">
                            <input placeholder="添加评论..." type="text">
                        </form>
                    </div>
                </div>
            </ion-item>
        </ion-list>
        <ion-infinite-scroll
                ng-if="more"
                icon="ion-loading-c"
                on-infinite="loadMorePost()"
                distance="1%">
        </ion-infinite-scroll>
    </ion-content>
</ion-view>
<script id="xy-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-assertive">
            <button class="button button-clear" ng-click="closeModal()">返回</button>
            <h1 class="title">{{item.get('userId').get('nick')}}</h1>
        </ion-header-bar>
        <ion-content>

            <ion-item class="xy-item bt0">
                <div class="item item-avatar">
                    <img ng-show="item.get('userId').get('cover_image_phone')"
                         src="{{item.get('userId').get('cover_image_phone')}}" onerror="javascript:this.src='img/ionic.png'">
                    <!--<img src="mcfly.jpg" onerror="javascript:this.src='img/ionic.png'">-->
                    <p class="mb5">{{item.createdAt}}</p>
                    <p class="ws-normal">{{item.get('userId').get('description')}}</p>
                </div>

                <div class="item item-body">
                    <img class="full-image" ng-show="item.get('image')._url"
                         onerror="javascript:this.src='img/weibo.jpg'" src="{{item.get('image')._url}}">
                    <div style="padding-left: 16px;">
                        <!--<p>{{item.get('title')}}</p>-->
                        <!--<p>{{item.createdAt}}</p>-->
                        <a class="button button-icon icon ion-ios-heart-outline" ng-click="goZan(item)"> 1</a>
                        <!--<a class="button button-icon icon ion-ios-heart">1</a>-->
                        <a class="button button-icon icon ion-ios-chatbubble-outline" ng-click="goChat(item)"> 1</a>
                        <!--<a class="subdued" ng-click="goZan(item)">1</a>-->
                        <!--<a href="#" class="subdued">5 Comments</a>-->
                        <!--</p>-->
                        <div ng-bind-html="item.get('title')"></div>
                        <!--<form ng-submit="saveForm()">-->
                            <!--<input placeholder="添加评论..." type="text">-->
                        <!--</form>-->

                    </div>
                </div>
            </ion-item>
            <div style="height: 44px;width: 100%">
            </div>
        </ion-content>
        <div class="bar bar-footer">
            <form ng-submit="saveForm()">
                <input placeholder="添加评论..." ng-model="msg" type="text" required>
            </form>
            <button class="button button-clear pull-right" disabled="msg.length==0" ng-show="msg.length>0" ng-click="saveForm()">发送</button>
        </div>
    </ion-modal-view>
</script>
